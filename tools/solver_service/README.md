# CorePlanX Solver Service (Python + OR-Tools)

This service exposes a small HTTP API that runs OR-Tools (CP-SAT) on planning
candidates generated by the CorePlanX backend.

## Setup

```bash
cd tools/solver_service
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

## Run

```bash
uvicorn app:app --host 0.0.0.0 --port 8099
```

The backend expects the solver at `http://localhost:8099` by default. Override
with `PLANNING_SOLVER_URL` in `backend/.env`.

## Endpoints

- `GET /health` basic health check
- `POST /solve` runs a CP-SAT solve on candidates

Example payload:

```json
{
  "rulesetId": "coreplanx",
  "rulesetVersion": "v1",
  "candidates": [
    {
      "id": "cand:break:1",
      "templateId": "break-30",
      "type": "break",
      "params": {
        "serviceId": "svc-1",
        "gapMinutes": 45
      }
    }
  ],
  "options": {
    "max_per_service_type": 1,
    "weight_key": "gapMinutes",
    "time_limit_seconds": 1.5
  }
}
```
