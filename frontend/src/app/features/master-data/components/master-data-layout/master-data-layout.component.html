<div class="md-layout">
  <header class="md-layout__header">
    <div>
      <h2>{{ title }}</h2>
      <p>{{ subtitle }}</p>
    </div>
  </header>

  <mat-tab-group
    animationDuration="300ms"
    [selectedIndex]="selectedIndex()"
    (selectedIndexChange)="handleTabChange($event)"
    class="md-layout__tabs"
  >
    @for (tab of tabs; track tab.id) {
      <mat-tab>
        <ng-template mat-tab-label>
          @if (tab.icon) {
            <mat-icon [fontIcon]="tab.icon"></mat-icon>
          }
          <span>{{ tab.title }}</span>
        </ng-template>

        <section class="md-layout__content">
          <p class="md-layout__tab-description">{{ tab.description }}</p>

          <div class="md-layout__sections">
            @for (section of tab.sections; track section.id) {
              @if (isComponentSection(section)) {
                <div class="md-layout__section" [attr.data-section-id]="section.id">
                  @if (section.title || section.description) {
                    <header class="md-layout__section-header">
                      @if (section.title) {
                        <h3>{{ section.title }}</h3>
                      }
                      @if (section.description) {
                        <p>{{ section.description }}</p>
                      }
                    </header>
                  }
                  <ng-container
                    *ngComponentOutlet="section.component; inputs: section.inputs ?? {}"
                  ></ng-container>
                </div>
              } @else if (isCategorySection(section)) {
                <div class="md-layout__section" [attr.data-section-id]="section.id">
                  @if (section.title || section.description) {
                    <header class="md-layout__section-header">
                      @if (section.title) {
                        <h3>{{ section.title }}</h3>
                      }
                      @if (section.description) {
                        <p>{{ section.description }}</p>
                      }
                    </header>
                  }
                  <app-master-data-category [config]="section.config" />
                </div>
              } @else if (isHierarchySection(section)) {
                <app-master-data-hierarchy-section [config]="section.config" />
              }
            }
          </div>
        </section>
      </mat-tab>
    }
  </mat-tab-group>
</div>
